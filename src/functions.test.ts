import { cloneDeep } from 'lodash';
import { openCoordinates } from './functions';

const map = [
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
];

const mapWithBombs = [
  ['0', '0', '0', '1', '*', '1', '1', '*', '1', '0'],
  ['1', '1', '1', '1', '1', '1', '1', '1', '1', '0'],
  ['1', '*', '1', '0', '1', '1', '1', '0', '0', '0'],
  ['1', '1', '1', '0', '1', '*', '1', '0', '0', '0'],
  ['0', '0', '0', '1', '2', '2', '1', '1', '2', '2'],
  ['1', '1', '0', '1', '*', '1', '0', '1', '*', '*'],
  ['*', '1', '0', '1', '1', '1', '0', '1', '2', '2'],
  ['2', '2', '0', '0', '0', '1', '1', '1', '0', '0'],
  ['*', '1', '0', '0', '0', '1', '*', '1', '0', '0'],
  ['1', '1', '0', '0', '0', '1', '1', '1', '0', '0'],
];

const expected = [
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
];

const expected2 = [
  ['0', '0', '0', '1', ' ', ' ', ' ', ' ', ' ', ' '],
  ['1', '1', '1', '1', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
];

describe('openMap', () => {
  test('Check if button can be open', () => {
    const testMap = cloneDeep(map);
    openCoordinates(testMap, mapWithBombs, { x: 1, y: 3 });
    expect(testMap).toEqual(expected);
  });
  test('Check near buttons if you found on zero', () => {
    const testMap = cloneDeep(map);
    openCoordinates(testMap, mapWithBombs, { x: 0, y: 0 });
    expect(testMap).toEqual(expected2);
  });
});
